{"version":3,"file":"js/561.576cc68a.js","mappings":"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","sources":["webpack://kportal/./src/api/api.js","webpack://kportal/./src/components/Staff.vue","webpack://kportal/./src/components/Staff.vue?5d2e"],"sourcesContent":["import axios from \"axios\"\r\nimport router from './../router'\r\nimport store from './../store'\r\n\r\n        \r\nconst api = axios.create();\r\n//start request\r\napi.interceptors.request.use(config =>{\r\n  if(localStorage.getItem('access_token')){\r\n    config.headers.authorization = `JWT ${localStorage.getItem('access_token')}`    \r\n  }\r\n  return config\r\n}, error =>{\r\n})\r\n//end request\r\napi.interceptors.response.use(config =>{\r\n  if(localStorage.getItem('access_token')){\r\n    config.headers.authorization = `JWT ${localStorage.getItem('access_token')}`    \r\n  }\r\n  return config\r\n}, error =>{\r\n    if ( error.response.data.code === \"token_not_valid\"){\r\n        return axios.post(`${store.getters.getServerUrl}/auth/jwt/refresh`, {        \r\n            \"refresh\": localStorage.getItem('refresh_token')            \r\n        }).then(res =>{\r\n            //refresh token response\r\n            localStorage.setItem('access_token', res.data.access)\r\n\r\n            error.config.authorization = `JWT ${localStorage.getItem('access_token')}`\r\n            // REPEAT!\r\n            return api.request(error.config)\r\n        }).error(err => {\r\n            console.log('Logout - токен истёк.')            \r\n            store.commit('logout') \r\n        })\r\n    }\r\n//   if(error.response.status === 401){            \r\n//     router.push('/login')\r\n//   }\r\n})\r\n\r\nexport default api","<template>\r\n    <div>\r\n        <h2>Справочник сотрудников</h2>\r\n        <!-- single-line\r\n          hide-details  -->\r\n         <v-text-field\r\n          v-model=\"search\"\r\n          append-icon=\"search\"\r\n          label=\"Поиск\"          \r\n        ></v-text-field>\r\n        <v-table>\r\n          <thead>\r\n            <tr>\r\n              <th class=\"text-left\">ФИО</th>\r\n              <th class=\"text-left\">Телефон</th>\r\n              <th class=\"text-left\">Мобильный</th>\r\n              <th class=\"text-left\">Должность</th>\r\n              <th class=\"text-left\">Подразделение</th>\r\n              <th class=\"text-left\">Кабинет</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr\r\n              v-for=\"item in filteredList\"\r\n              :key=\"item.id\"              \r\n              @click=\"openDialog(item)\"\r\n            >\r\n              <td>{{ item.display_name }}</td>\r\n              <td>{{ item.inner_phone }}</td>\r\n              <td>{{ getPhone(item.mobile_phone) }}</td>\r\n              <td>{{ item.post }}</td>\r\n              <td>{{ item.department }}</td>\r\n              <td>{{ item.room }}</td>\r\n\r\n              <!-- <v-btn\r\n                color=\"primary\"\r\n                @click=\"openDialog(item)\"\r\n              >\r\n                ...\r\n              </v-btn> -->\r\n              \r\n            </tr>\r\n          </tbody>\r\n        </v-table>\r\n\r\n         <v-dialog\r\n            v-model=\"dialog\"\r\n          >\r\n            <v-card>\r\n              <v-card-header>\r\n                Карточка сотрудника\r\n              </v-card-header>\r\n              <v-card-text>\r\n                <b>Фамилия:</b> {{this.selected.last_name}} <br>\r\n                <b>Имя:</b> {{this.selected.first_name}}<br>\r\n                <b>Отчество:</b> {{this.selected.middle_name}}<br>\r\n                <b>Должность:</b> {{this.selected.post}}<br>\r\n                <b>Подразделение:</b> {{this.selected.department}}<br>\r\n                <b>Кабинет:</b> {{this.selected.room}}<br>\r\n                <b>Внутренний телефон:</b> {{this.selected.inner_phone}}<br>\r\n                <b>Внешний телефон:</b> {{this.selected.outer_phone}}<br>\r\n                <b>Мобильный:</b> {{getPhone(this.selected.mobile_phone)}}<br>\r\n                <b>Дата рождения:</b> {{this.selected.birth_date}}<br>\r\n                <b>Почта:</b> {{ this.selected.mail}}<br>\r\n                <b>Логин:</b> {{this.selected.account_name}}<br>\r\n\r\n                <p v-if=\"this.selected.gender === 'Male'\">\r\n                  <b>Пол</b> мужской <br></p>\r\n                <p v-else-if=\"this.selected.gender === 'Female'\">\r\n                  <b>Пол</b> женский <br></p>\r\n                <p v-else></p>\r\n\r\n              </v-card-text>\r\n              <v-card-actions>\r\n                <v-btn color=\"primary\" block @click=\"dialog = false\">Закрыть</v-btn>\r\n              </v-card-actions>\r\n            </v-card>\r\n          </v-dialog>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport API from '../api/api'\r\nconst re = /\\s*(?:-|$)|(?:|$)\\s*/\r\nexport default {\r\n  name: 'Staff',\r\n  //props:,\r\n  data(){\r\n    return{\r\n      search: \"\",\r\n      staff: [],\r\n      dialog: false,\r\n      selected: {},\r\n    }\r\n  },\r\n  components:{},\r\n  created(){ \r\n      console.log('staff page')\r\n      this.getStaff()\r\n      // this.getRoles()\r\n      // this.getServices()\r\n  },\r\n   computed: {\r\n    filteredList() {\r\n      return this.staff.filter(item => {\r\n        return (\r\n            item.display_name.toLowerCase().includes(this.search.toLowerCase())\r\n            || item.post.toLowerCase().includes(this.search.toLowerCase())\r\n            || item.department.toLowerCase().includes(this.search.toLowerCase())\r\n            || item.room.toLowerCase().includes(this.search.toLowerCase())\r\n        )\r\n\r\n      })\r\n    },\r\n   },\r\n  methods:{\r\n\r\n      getPhone(numberPhone) {\r\n        //StringBuilder или Join?\r\n        if(numberPhone) {\r\n          String\r\n          let str;\r\n          str = numberPhone.split(re).join(\"\");\r\n          return \"+7 (\" + str.slice(1, 4) + \") \" + str.slice(4, 7) + \"-\" + str.slice(7, 9) + \"-\" + str.slice(9);\r\n        }\r\n        return null;\r\n      },\r\n      openDialog(item){\r\n        this.dialog = true\r\n        this.selected = item\r\n      },\r\n      closeDialog(){\r\n        this.dialog = false\r\n        this.selected = {}\r\n      },\r\n      getStaff(){\r\n        API.get(`${this.$store.getters.getServerUrl}/workers/all/`)\r\n        .then( res => {\r\n            console.log('response staff')\r\n            console.log(res)\r\n            this.staff = res.data\r\n            \r\n            // localStorage.setItem('access_token', res.data.access)\r\n        })\r\n        .catch(function (error) {\r\n            console.log('error')\r\n            console.log(error)\r\n        })\r\n      },\r\n      /*\r\n       getRoles(){\r\n        API.get(`${this.$store.getters.getServerUrl}/get_roles`)\r\n        .then( res => {\r\n            console.log('response roles')\r\n            console.log(res.data)\r\n            this.roles = res.data.roles\r\n            //localStorage.setItem('access_token', res.data.access)\r\n        })\r\n        .catch(function (error) {\r\n            console.log('error')\r\n            console.log(error)\r\n        })\r\n      },\r\n       getServices(){\r\n        API.get(`${this.$store.getters.getServerUrl}/service/for_me`)\r\n        .then( res => {\r\n            console.log('response services')\r\n            console.log(res.data)\r\n            this.services = res.data\r\n            //localStorage.setItem('access_token', res.data.access)\r\n        })\r\n        .catch(function (error) {\r\n            console.log('error')\r\n            console.log(error)\r\n        })\r\n      },//*/\r\n  },\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n\r\n</style>\r\n","import { render } from \"./Staff.vue?vue&type=template&id=75654019\"\nimport script from \"./Staff.vue?vue&type=script&lang=js\"\nexport * from \"./Staff.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\motyh\\\\WebstormProjects\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["api","axios","interceptors","request","use","config","localStorage","getItem","headers","authorization","error","response","data","code","store","then","res","setItem","access","err","console","log","_createElementVNode","class","_hoisted_30","_hoisted_32","_hoisted_35","_hoisted_37","_createElementBlock","_hoisted_1","_createVNode","_component_v_text_field","$data","$event","label","_component_v_table","_hoisted_2","_Fragment","_renderList","$options","item","key","id","onClick","_toDisplayString","display_name","inner_phone","mobile_phone","post","department","room","_component_v_dialog","_component_v_card","_component_v_card_header","_component_v_card_text","_hoisted_5","selected","last_name","_hoisted_6","_hoisted_7","first_name","_hoisted_8","_hoisted_9","middle_name","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","outer_phone","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","birth_date","_hoisted_24","_hoisted_25","mail","_hoisted_26","_hoisted_27","account_name","_hoisted_28","gender","_hoisted_29","_hoisted_33","_hoisted_34","_hoisted_38","_hoisted_39","_component_v_card_actions","_component_v_btn","color","block","re","name","search","staff","dialog","components","created","this","getStaff","computed","filteredList","filter","toLowerCase","includes","methods","getPhone","numberPhone","str","split","join","slice","openDialog","closeDialog","API","$store","getters","getServerUrl","catch","__exports__","render"],"sourceRoot":""}