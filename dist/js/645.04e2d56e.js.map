{"version":3,"file":"js/645.04e2d56e.js","mappings":"wJAKA,MAAMA,EAAMC,IAAAA,SAEZD,EAAIE,aAAaC,QAAQC,KAAIC,IACxBC,aAAaC,QAAQ,kBACtBF,EAAOG,QAAQC,cAAiB,OAAMH,aAAaC,QAAQ,mBAEtDF,KACNK,QAGHV,EAAIE,aAAaS,SAASP,KAAIC,IACzBC,aAAaC,QAAQ,kBACtBF,EAAOG,QAAQC,cAAiB,OAAMH,aAAaC,QAAQ,mBAEtDF,KACNK,IACC,GAAkC,oBAA7BA,EAAMC,SAASC,KAAKC,KACrB,OAAOZ,IAAAA,KAAY,GAAEa,EAAAA,EAAAA,QAAAA,gCAA+C,CAChE,QAAWR,aAAaC,QAAQ,mBACjCQ,MAAKC,IAEJV,aAAaW,QAAQ,eAAgBD,EAAIJ,KAAKM,QAE9CR,EAAML,OAAOI,cAAiB,OAAMH,aAAaC,QAAQ,kBAElDP,EAAIG,QAAQO,EAAML,WAC1BK,OAAMS,IACLC,QAAQC,IAAI,yBACZP,EAAAA,EAAAA,OAAa,SAAS,GAE9B,IAMJ,Q,0OCxCEQ,EAAAA,EAAAA,IAsBM,2BAnBEA,EAAAA,EAAAA,IAiBSC,EAAAA,GAAAA,MAAAA,EAAAA,EAAAA,IAjBgCC,EAAAA,OAARC,K,WAAjCC,EAAAA,EAAAA,IAiBSC,EAAAA,EAAAA,CAjBDC,MAAM,YAAmCC,IAAKJ,EAAKK,O,mBACzD,IAEgB,EAFhBC,EAAAA,EAAAA,IAEgBC,EAAAA,KAAAA,C,kBADd,IAAuB,EAAvBC,EAAAA,EAAAA,GAAuB,mBAAjBR,EAAKK,OAAK,M,WAGPL,EAAKS,QAAK,WAArBZ,EAAAA,EAAAA,IAOM,2BANAG,EAAKU,WAAW,IAClB,YAAuBC,EAAAA,IACvBL,EAAAA,EAAAA,IAGiBM,EAAAA,EAAAA,KAAAA,C,kBADf,IAAwD,EAAxDN,EAAAA,EAAAA,IAAwDO,EAAAA,EAAAA,CAAhDC,QAAK,GAAEd,EAAKS,OAAQ,G,mBAAO,IAAa,UAAb,oB,qDAGzCZ,EAAAA,EAAAA,IAEM,iBADFG,EAAKe,MAAI,O,oCAWzB,GACEC,KAAM,OACNC,MAAO,CAAC,MAER9B,OACE,MAAM,CACJ+B,MAAO,GAEX,EACAC,WAAW,CAAC,EACZC,UACIzB,QAAQC,IAAI,YAEhB,EACAyB,QAAQ,CACJC,UACEC,EAAAA,EAAAA,IAAS,GAAEC,KAAKC,OAAOC,QAAQC,4BAC9BrC,MAAMC,IACHI,QAAQC,IAAI,kBACZD,QAAQC,IAAIL,EAAIJ,KAAK,IAIxByC,OAAM,SAAU3C,GACbU,QAAQC,IAAI,SACZD,QAAQC,IAAIX,EAChB,GACF,I,QCnDN,MAAM4C,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://kportal/./src/api/api.js","webpack://kportal/./src/components/NewsOne.vue","webpack://kportal/./src/components/NewsOne.vue?08e3"],"sourcesContent":["import axios from \"axios\"\r\nimport router from './../router'\r\nimport store from './../store'\r\n\r\n        \r\nconst api = axios.create();\r\n//start request\r\napi.interceptors.request.use(config =>{\r\n  if(localStorage.getItem('access_token')){\r\n    config.headers.authorization = `JWT ${localStorage.getItem('access_token')}`    \r\n  }\r\n  return config\r\n}, error =>{\r\n})\r\n//end request\r\napi.interceptors.response.use(config =>{\r\n  if(localStorage.getItem('access_token')){\r\n    config.headers.authorization = `JWT ${localStorage.getItem('access_token')}`    \r\n  }\r\n  return config\r\n}, error =>{\r\n    if ( error.response.data.code === \"token_not_valid\"){\r\n        return axios.post(`${store.getters.getServerUrl}/auth/jwt/refresh`, {        \r\n            \"refresh\": localStorage.getItem('refresh_token')            \r\n        }).then(res =>{\r\n            //refresh token response\r\n            localStorage.setItem('access_token', res.data.access)\r\n\r\n            error.config.authorization = `JWT ${localStorage.getItem('access_token')}`\r\n            // REPEAT!\r\n            return api.request(error.config)\r\n        }).error(err => {\r\n            console.log('Logout - токен истёк.')            \r\n            store.commit('logout') \r\n        })\r\n    }\r\n//   if(error.response.status === 401){            \r\n//     router.push('/login')\r\n//   }\r\n})\r\n\r\nexport default api","<template>\r\n  <div>\r\n    \r\n   \r\n          <v-card class=\"my-4 pa-4\" v-for=\"post in posts\" :key=\"post.title\">\r\n            <v-card-header>\r\n              <h1>{{post.title}}</h1>\r\n            </v-card-header>\r\n            \r\n            <div v-if=\"post.short\">\r\n                {{post.shorttext}}\r\n                <v-divider></v-divider>\r\n                <v-card-actions>\r\n                  \r\n                  <v-btn @click=\"post.short = false\">Читать дальше</v-btn>\r\n                </v-card-actions>\r\n            </div>\r\n            <div v-else>\r\n              {{post.text}}\r\n            </div>\r\n          \r\n          </v-card>\r\n      \r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport API from '../api/api'\r\nexport default {\r\n  name: 'News',\r\n  props: ['id'],\r\n  //props:,\r\n  data(){\r\n    return{\r\n      posts: [],\r\n    }\r\n  },\r\n  components:{},\r\n  created(){ \r\n      console.log('news page')\r\n      // this.getNews()\r\n  },\r\n  methods:{    \r\n      getNews(){\r\n        API.get(`${this.$store.getters.getServerUrl}/workers/all`)\r\n        .then( res => {\r\n            console.log('response staff')\r\n            console.log(res.data)\r\n            // this.staff = res.data\r\n            //localStorage.setItem('access_token', res.data.access)\r\n        })\r\n        .catch(function (error) {\r\n            console.log('error')\r\n            console.log(error)\r\n        })\r\n      },\r\n  },\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n\r\n</style>\r\n","import { render } from \"./NewsOne.vue?vue&type=template&id=315b26cc\"\nimport script from \"./NewsOne.vue?vue&type=script&lang=js\"\nexport * from \"./NewsOne.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\motyh\\\\WebstormProjects\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["api","axios","interceptors","request","use","config","localStorage","getItem","headers","authorization","error","response","data","code","store","then","res","setItem","access","err","console","log","_createElementBlock","_Fragment","$data","post","_createBlock","_component_v_card","class","key","title","_createVNode","_component_v_card_header","_createElementVNode","short","shorttext","_component_v_divider","_component_v_card_actions","_component_v_btn","onClick","text","name","props","posts","components","created","methods","getNews","API","this","$store","getters","getServerUrl","catch","__exports__","render"],"sourceRoot":""}