{"version":3,"file":"js/217.e3039270.js","mappings":"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","sources":["webpack://kportal/./src/api/api.js","webpack://kportal/./src/views/RegView.vue","webpack://kportal/./src/views/RegView.vue?e66b"],"sourcesContent":["import axios from \"axios\"\r\nimport router from './../router'\r\nimport store from './../store'\r\n\r\n        \r\nconst api = axios.create();\r\n//start request\r\napi.interceptors.request.use(config =>{\r\n  if(localStorage.getItem('access_token')){\r\n    config.headers.authorization = `JWT ${localStorage.getItem('access_token')}`    \r\n  }\r\n  return config\r\n}, error =>{\r\n})\r\n//end request\r\napi.interceptors.response.use(config =>{\r\n  if(localStorage.getItem('access_token')){\r\n    config.headers.authorization = `JWT ${localStorage.getItem('access_token')}`    \r\n  }\r\n  return config\r\n}, error =>{\r\n    if ( error.response.data.code === \"token_not_valid\"){\r\n        return axios.post(`${store.getters.getServerUrl}/auth/jwt/refresh`, {        \r\n            \"refresh\": localStorage.getItem('refresh_token')            \r\n        }).then(res =>{\r\n            //refresh token response\r\n            localStorage.setItem('access_token', res.data.access)\r\n\r\n            error.config.authorization = `JWT ${localStorage.getItem('access_token')}`\r\n            // REPEAT!\r\n            return api.request(error.config)\r\n        }).error(err => {\r\n            console.log('Logout - токен истёк.')            \r\n            store.commit('logout') \r\n        })\r\n    }\r\n//   if(error.response.status === 401){            \r\n//     router.push('/login')\r\n//   }\r\n})\r\n\r\nexport default api","<template>\r\n  <div>\r\n\r\n    <h2>{{title}}</h2>\r\n<!--    <p>Режим напоминания пароля: {{remindMode}}</p>-->\r\n<!--    <p>Выбрать пользователя из списка в DV.       -->\r\n<!--      Если у пользователя есть email, то выслать на него новый логин\\пароль.-->\r\n<!--      Если не нашли себя, позвоните Анне Гайдай и попросите добавить в справочник Docsvision.-->\r\n<!--      </p>-->\r\n<!--    <p>Начните вводить Имя или фамилию</p>-->\r\n\r\n    <v-card>\r\n      <v-card-header>\r\n        <v-card-header-text class=\"ma-4\">\r\n          <v-card-title color=\"white\"></v-card-title>\r\n        </v-card-header-text>\r\n      </v-card-header>\r\n\r\n      <v-container>\r\n        <v-form\r\n            ref=\"form\"\r\n\r\n        >\r\n\r\n          <v-text-field\r\n              v-model=\"email\"\r\n              label=\"E-mail\"\r\n              variant=\"outlined\"\r\n              :rules=\"[rules.required, rules.email]\"\r\n          ></v-text-field>\r\n\r\n          <p\r\n              v-if=\"errors.length\"\r\n          >\r\n            {{ errors }}\r\n          </p>\r\n\r\n          <v-container\r\n              align=\"center\">\r\n            <v-btn\r\n                type=\"submit\"\r\n                color=\"primary\"\r\n                @click=\"checkEmail\"\r\n            >\r\n              Отправить\r\n            </v-btn>\r\n          </v-container>\r\n        </v-form>\r\n      </v-container>\r\n    </v-card>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport API from '../api/api'\r\nexport default {\r\n  name: 'Reg',\r\n  props: {\r\n    remindMode: undefined,\r\n  },\r\n  data(){\r\n    return{\r\n       title: '...',\r\n       remind: false,\r\n       email: null,\r\n       errors: '',\r\n       rules: {\r\n         required: value => !!value || 'Поле не может быть пустым.',\r\n         email: value => {\r\n           const pattern = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\r\n           return pattern.test(value) || 'Недействительная электронная почта'\r\n         }\r\n       },\r\n    }\r\n  },\r\n\r\n  components:{},\r\n  created(){\r\n    console.log('remind mode');\r\n    console.log(this.remindMode);\r\n    if(this.remindMode === 'remind'){\r\n      this.title = 'Восстановление пароля';\r\n      this.remind = true;\r\n    }else{      \r\n      this.title = 'Регистрация нового пользователя';\r\n      this.remind = false;\r\n    }\r\n  },\r\n  methods:{\r\n    checkEmail: function () {\r\n\r\n      if (!this.errors.length) {\r\n        if (this.remindMode === 'remind') {\r\n           axios.post(`${this.$store.getters.getServerUrl}/auth/users/reset_password/`, {email: this.email})\r\n              .then(res => {\r\n                console.log(res)\r\n              })\r\n        }\r\n        else {\r\n          console.log('Тут должен быть запрос на регистрацию')\r\n\r\n        }\r\n        return true;\r\n      }\r\n\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n\r\n</style>\r\n","import { render } from \"./RegView.vue?vue&type=template&id=67e611ef\"\nimport script from \"./RegView.vue?vue&type=script&lang=js\"\nexport * from \"./RegView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\motyh\\\\WebstormProjects\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["api","axios","interceptors","request","use","config","localStorage","getItem","headers","authorization","error","response","data","code","store","then","res","setItem","access","err","console","log","_createElementBlock","_createElementVNode","_toDisplayString","$data","_createVNode","_component_v_card","_component_v_card_header","_component_v_card_header_text","class","_component_v_card_title","color","_component_v_container","_component_v_form","ref","_component_v_text_field","$event","label","variant","rules","required","email","length","_hoisted_1","align","_component_v_btn","type","onClick","$options","name","props","remindMode","undefined","title","remind","errors","value","pattern","test","components","created","this","methods","checkEmail","$store","getters","getServerUrl","__exports__","render"],"sourceRoot":""}