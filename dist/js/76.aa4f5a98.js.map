{"version":3,"file":"js/76.aa4f5a98.js","mappings":"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","sources":["webpack://kportal/./src/api/api.js","webpack://kportal/./src/components/AddNews.vue","webpack://kportal/./src/components/AddNews.vue?5249"],"sourcesContent":["import axios from \"axios\"\r\nimport router from './../router'\r\nimport store from './../store'\r\n\r\n        \r\nconst api = axios.create();\r\n//start request\r\napi.interceptors.request.use(config =>{\r\n  if(localStorage.getItem('access_token')){\r\n    config.headers.authorization = `JWT ${localStorage.getItem('access_token')}`    \r\n  }\r\n  return config\r\n}, error =>{\r\n})\r\n//end request\r\napi.interceptors.response.use(config =>{\r\n  if(localStorage.getItem('access_token')){\r\n    config.headers.authorization = `JWT ${localStorage.getItem('access_token')}`    \r\n  }\r\n  return config\r\n}, error =>{\r\n    if ( error.response.data.code === \"token_not_valid\"){\r\n        return axios.post(`${store.getters.getServerUrl}/auth/jwt/refresh`, {        \r\n            \"refresh\": localStorage.getItem('refresh_token')            \r\n        }).then(res =>{\r\n            //refresh token response\r\n            localStorage.setItem('access_token', res.data.access)\r\n\r\n            error.config.authorization = `JWT ${localStorage.getItem('access_token')}`\r\n            // REPEAT!\r\n            return api.request(error.config)\r\n        }).error(err => {\r\n            console.log('Logout - токен истёк.')            \r\n            store.commit('logout') \r\n        })\r\n    }\r\n//   if(error.response.status === 401){            \r\n//     router.push('/login')\r\n//   }\r\n})\r\n\r\nexport default api","<template>\r\n  <div>\r\n\r\n\r\n    <v-card class=\"my-4 pa-4\">\r\n      <v-card-header>\r\n        <div>\r\n          <span style=\"font-weight: bold\">Tittle:</span>\r\n          <p style=\"white-space: pre-line;\">{{title}}</p>\r\n        </div>\r\n      </v-card-header>\r\n      <v-card-header>\r\n        <div>\r\n          <span style=\"font-weight: bold\">Short text:</span>\r\n          <p style=\"white-space: pre-line;\">{{shorttext}}</p>\r\n        </div>\r\n      </v-card-header>\r\n      <v-card-header>\r\n        <div>\r\n          <span style=\"font-weight: bold\">Text:</span>\r\n          <p style=\"white-space: pre-line;\">{{text}}</p>\r\n        </div>\r\n      </v-card-header>\r\n    </v-card>\r\n\r\n    <v-container>\r\n      <v-form ref=\"form\">\r\n        <v-textarea\r\n            v-model=\"title\"\r\n            label=\"Tittle\"\r\n            type=\"text\"\r\n            variant=\"outlined\"\r\n            :rules = \"[rules.required]\"\r\n        >\r\n        </v-textarea>\r\n\r\n        <v-textarea\r\n            v-model=\"shorttext\"\r\n            label=\"Short text\"\r\n            type=\"text\"\r\n            variant=\"outlined\"\r\n            :rules = \"[rules.required]\"\r\n        >\r\n        </v-textarea>\r\n\r\n        <v-textarea\r\n            v-model=\"text\"\r\n            label=\"Text\"\r\n            type=\"text\"\r\n            variant=\"outlined\"\r\n            :rules = \"[rules.required]\"\r\n            required\r\n        >\r\n        </v-textarea>\r\n\r\n        <v-container\r\n            align=\"center\">\r\n          <v-btn\r\n\r\n              color=\"primary\"\r\n              @click=\"AddNews\"\r\n          >\r\n            Добавить\r\n          </v-btn>\r\n        </v-container>\r\n\r\n      </v-form>\r\n    </v-container>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport API from '../api/api'\r\n\r\nexport default {\r\n\r\n  name: \"NewsUpdate\",\r\n\r\n  data(){\r\n    return{\r\n      post: {},\r\n      title: '',\r\n      shorttext: '',\r\n      text: '',\r\n      short: true,\r\n      rules: {\r\n        required: value => !!value || 'Поле не может быть пустым.'\r\n      },\r\n    }\r\n  },\r\n\r\n  components:{},\r\n  created(){\r\n    console.log('Add news page')\r\n    API.get(`${this.$store.getters.getServerUrl}/get_roles`).then(\r\n        res => {\r\n          //Нужно ли добавлять сюда админа или можно будет через админ панель назначить себе группу?\r\n          if (!res.data.roles.includes('news_editor')){\r\n            this.$router.push(`/news/`)\r\n          }\r\n        }\r\n    )\r\n  },\r\n\r\n  methods:{\r\n    async AddNews(){\r\n      if ((await this.$refs.form.validate()).valid) {\r\n        API.post(\r\n            `${this.$store.getters.getServerUrl}/posts/new/`,\r\n            {title: this.title, shorttext: this.shorttext, text: this.text, short: true}\r\n        ).catch(function (error) {\r\n          console.log('error')\r\n          console.log(error)\r\n        })\r\n        await this.$router.push(`/news/`)\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import { render } from \"./AddNews.vue?vue&type=template&id=4f85720d\"\nimport script from \"./AddNews.vue?vue&type=script&lang=js\"\nexport * from \"./AddNews.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\motyh\\\\WebstormProjects\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["api","axios","interceptors","request","use","config","localStorage","getItem","headers","authorization","error","response","data","code","store","then","res","setItem","access","err","console","log","_createElementVNode","style","_createElementBlock","_createVNode","_component_v_card","class","_component_v_card_header","_hoisted_1","_toDisplayString","$data","_hoisted_3","_hoisted_5","_component_v_container","_component_v_form","ref","_component_v_textarea","$event","label","type","variant","rules","required","align","_component_v_btn","color","onClick","$options","name","post","title","shorttext","text","short","value","components","created","API","this","$store","getters","getServerUrl","roles","includes","$router","push","methods","async","$refs","form","validate","valid","catch","__exports__","render"],"sourceRoot":""}